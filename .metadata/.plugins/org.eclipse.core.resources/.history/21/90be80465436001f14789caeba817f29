#ifndef AT_WIFI_H
#define AT_WIFI_H

#include "stm32f1xx_hal.h"
#include <string.h>
#include "main.h"

extern UART_HandleTypeDef *AT_huart;

// Structure to hold static AT commands
typedef struct {
    char *reset;
    char *setModeStation;
    char *checkWiFi;
    char *getIP;
    char *enableMUX;
    char *stopServer;
    char *listAPs;
    char *restoreDefaults;
} AT_Commands;

extern AT_Commands atCommands;

// Function prototypes for sending command and receiving response
void ESP_SendCommand(const char *command);

// Function prototypes for sending data with multiple variables
void ESP_SendTCP(uint8_t con_num, char *data);

// Function prototype for initializing UART with specified handle
void ESP_UART_Init(UART_HandleTypeDef *huart);

// Function prototypes for AT commands with modifiable parameters
void ESP_SetIP(const char *ip);
void ESP_SetModeAP();
void ESP_SetSoftAP(const char *ssid, const char *password);
void ESP_ConnectWiFi(const char *ssid, const char *password);
void ESP_StartServer(uint16_t port);

#endif // AT_WIFI_H
